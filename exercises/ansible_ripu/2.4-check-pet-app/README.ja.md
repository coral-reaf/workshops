## 目次

- [ワークショップ演習 - ペット アプリの調子はどうですか?](#workshop-exercise---how-is-the-pet-app-doing)
  - [目次](#目次)
  - [目標](#目標)
  - [ガイド](#ガイド)
    - [Step 1 - ペットアプリケーションの再テスト](#step-1---ペットアプリケーションの再テスト)
    - [Step 2 - データベースへのレコードの追加](#step-2---データベースへのレコードの追加)
  - [まとめ](#まとめ)

## 目標

* アップグレード後もペット アプリが期待どおりに機能していることを確認する
* アプリ データベースに新しいレコードを追加して、ロールバック時に何が起こるかを確認する

## ガイド

[演習 1.6](../1.6-my-pet-app/README.ja.md)サンプルのペット アプリケーションをインストールし、その機能をテストしました。アプリケーション サーバーの RHEL バージョンをアップグレードしたので、影響があったかどうかを確認するために再テストしてみましょう。

### Step 1 - ペットアプリケーションの再テスト

前の演習の [Step 3](../1.6-my-pet-app/README.md#step-3---ペットアプリケーションのテスト) で行ったテストを繰り返します。

- 通常は、以前と同じアドレスでアプリケーションの Web ユーザー インターフェイスにアクセスできるはずです。ブラウザー タブの 1 つでまだアプリが開いている場合は、ページを更新してみてください。

> **注**
>
> ワークショップ用にプロビジョニングされた EC2 インスタンスの外部 IP アドレスは動的に割り当てられるため (つまり、DHCP を使用)、再起動後に Web ユーザー インターフェイスの URL が変更される可能性があります。その場合は、アプリケーション サーバーのシェル プロンプトで次のコマンドを実行して、アプリケーション Web ユーザー インターフェイスの新しい URL を確認します。
>
> ```
> echo "http://$(curl -s ifconfig.me):8080"
> ```

- 以前に [所有者の編集] ボタンまたは [新しいペットの追加] ボタンを使用してデータを変更したり、新しいレコードを追加したりしましたか? その場合は、そのデータがまだ存在し、正しく表示されているかどうかを確認します。

- アプリケーションの動作に変化が見られたり、アプリケーションがまったく動作しなかったりする場合は、問題のトラブルシューティングを行って、根本原因を絞り込みます。アップグレードをロールバックした後に再テストできるように、問題をメモしておきます。

### Step 2 - データベースへのレコードの追加

[演習 2.2](../2.2-snapshots/README.md) では、スナップショットのスコープにアプリケーション データを含めることの潜在的な落とし穴について検討しました。アップグレード後、最初はアプリに問題がないように見えたのに、アプリが本番環境に戻った後に問題が見つかった場合、どうなるか想像してみてください。

- データベースに新しいレコードを追加します。たとえば、簡単に区別できるように、「Post Upgrade」という名前で新しいペット レコードを追加します。ワークショップの次のセクションで OS アップグレードを元に戻した後に何が起こるかを確認するために、このレコードを覚えておいてください。

- アップグレードでデータ更新がロールバックされた場合、ビジネスにどのような影響がありますか? これはまさに、このワークショップで展開されたペット アプリ サーバーに OS とアプリ データを分離するための個別のボリュームがないため、次に説明する問題です。

## 結論

この演習では、RHEL インプレース アップグレードによってアプリケーションがそのまま残され、アップグレード後も期待どおりに機能することを確認しました。次に、アップグレードをロールバックした後に何が起こるかを示すために、新しいアプリ データをいくつか追加しました。

これで、ワークショップの RHEL アップグレード セクションは終了です。次の最後のセクションでは、RHEL アップグレードをロールバックして、開始した場所に戻ります。

---

**ナビゲーション**

[前の演習](../2.3-check-upg/README.ja.md) - [次の演習](../3.1-rm-rf/README.ja.md)

[ホーム](../README.ja.md)
