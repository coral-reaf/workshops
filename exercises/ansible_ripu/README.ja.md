# RHEL インプレースアップグレードオートメーションワークショップ

このワークショップでは、Red Hat Enterprise Linux (RHEL) のインプレース・アップグレードを自動化する包括的なアプローチを紹介します。このソリューションでは、Ansible Automation Platform (AAP) を使用して、大規模な RHEL ホスト全体でエンタープライズ規模のアップグレードを実行します。このワークショップでは、RHEL7 から RHEL8 へのアップグレード、および RHEL8 から RHEL9 へのアップグレードを実行するために、このアプローチの例を使用する方法を示します。また、このソリューションを企業環境の特殊な要件に合わせてカスタマイズする方法についても学びます。

このソリューション・アプローチには、規模を拡大して成功を収めるために推奨される4つの重要な特徴があります:

![Automate Everything, Snapshot/rollback, Custom Modules, Reporting Dashboard](images/ripu_key_features.svg)

このワークショップを進めるにつれ、これらの機能の重要性と、企業での実装方法のさまざまなオプションについて、より詳しく学ぶことができます。このワークショップでは、Ansible Automation Platformの使用経験、およびAnsible playbookとロールの使用経験があることを前提としています。Ansibleを初めて使用する場合は、まず次のワークショップを完了することをご検討ください。 [Ansible for Red Hat Enterprise Linux](https://aap2.demoredhat.com/exercises/ansible_rhel/README.ja.html).

## 目次

- [RHEL In-place Upgrade Automation ワークショップ](#rhel-in-place-upgrade-automation-workshop)
  - [目次](#目次)
  - [プレゼンテーション](#プレゼンテーション)
  - [タイムプランニング](#タイムプランニング)
  - [Lab ダイヤグラム](#Lab-ダイヤグラム)
  - [ワークショップ演習](#ワークショップ演習)
    - [セクション 1 - アップグレード前の分析](#セクション-1---アップグレード前の分析)
    - [セクション 2 - RHEL OS アップグレード](#セクション-2---rhel-os-アップグレード)
    - [セクション 3 - ロールバック](#セクション-3---ロールバック)
  - [ワークショップナビゲーション](#ワークショップナビゲーション)

## プレゼンテーション

この演習は、RHEL のインプレースアップグレードを自動化するためのすべてのフェーズに対して、参加者をガイドします。すべてのコンセプトは、紹介されながら説明されます。

このワークショップで示されたアプローチの利点に関する追加情報をまとめたプレゼンテーション・デッキをオプションで用意しています。:
[RHEL In-place Upgrade Automation](../../decks/ansible_ripu.pdf)

## タイムプランニング

ワークショップの所要時間は、参加者の人数やLinuxやAnsibleにどれだけ慣れているかによって異なります。演習自体は最低4時間かかります。オプショナルプレゼンテーションのイントロダクションでさらに1時間追加されます。省略可能なオプションの演習もいくつかありますが、時間が許せばそちらをお勧めします。また、ワークショップの最後には補足的な演習があり、自由に実験したり、特定の環境や要件に適用できるカスタマイズを検討することができます。提供されるラボ環境は、数日間のディープダイブ・ワークショップに使用することもできますが、このガイドの範囲を超えています。

## Lab ダイヤグラム

ワークショップ用に用意されたラボ環境には、複数のRHELクラウドインスタンスが含まれています。1つのインスタンスはAAPのホスティング専用で、Playbook とワークフローのジョブを実行するために使用されます。ジョブは、次のRHELメジャーバージョンにインプレースでアップグレードされる残りのホストに対して実行されます。自動化は、スナップショット/ロールバック機能を管理するためにLVMを使用します。

![RHEL In-place Upgrade Automation Workshop lab diagram](images/ripu_lab_diagram.svg)

## ワークショップ演習

ワークショップは3つのセクションで構成され、各セクションにはいくつかの演習が含まれています。各演習は、前の演習で実施した内容に基づいているため、順番に行う必要があります。

### セクション 1 - アップグレード前の分析

* [演習 1.1 - ワークショップ Lab 環境](1.1-setup/README.jp.md)
* [演習 1.2 - プリアップグレードジョブの実行](1.2-preupg/README.jp.md)
* [演習 1.3 - プリアップグレードレポートのレビュー](1.3-report/README.jp.md)
* [演習 1.4 - 推奨の修復作業の実行](1.4-remediate/README.jp.md)
* [演習 1.5 - (オプション) カスタムプリアップグレードチェック](1.5-custom-modules/README.jp.md)
* [演習 1.6 - (オプション) ペットアプリのデプロイ](1.6-my-pet-app/README.jp.md)

### セクション 2 - RHEL OS アップグレード

* [演習 2.1 - OS アップグレードジョブの実行](2.1-upgrade/README.jp.md)
* [演習 2.2 - スナップショットに関するお話](2.2-snapshots/README.jp.md)
* [演習 2.3 - アップグレードが成功したか否かの確認](2.3-check-upg/README.jp.md)
* [演習 2.4 - (オプション) ペットアプリの動作具合は？](2.4-check-pet-app/README.jp.md)

### セクション 3 - ロールバック

* [演習 3.1 - (オプション) インスタンスの破棄](3.1-rm-rf/README.jp.md)
* [演習 3.2 - ロールバックジョブの実行](3.2-rollback/README.jp.md)
* [演習 3.3 - アップグレードが元に戻されたことの確認](3.3-check-undo/README.jp.md)
* [演習 3.4 - 繰り返し](3.4-conclusion/README.jp.md)

## ワークショップナビゲーション

各演習ページの下部に、前の演習と次の演習へのリンクがあります。移動するには、下のリンクをクリックしてください。

---

**ナビゲーション**

[Next Exercise](1.1-setup/README.jp.md)
