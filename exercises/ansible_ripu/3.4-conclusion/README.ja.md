# ワークショップ演習 - 繰り返し

## 目次

- [ワークショップ演習 - 繰り返し](#ワークショップ演習---繰り返し)
  - [目次](#目次)
  - [目標](#目標)
  - [ガイド](#ガイド)
    - [Step 1 - 学習内容](#step-1---学習内容)
    - [Step 2 - 追加クレジットのアクティビティ](#step-2---追加クレジットのアクティビティ)
    - [Step 3 - コードの確認](#step-3---コードの確認)
      - [redhat-c​​op/infra.leapp](#redhat-c​​opinfraleapp)
      - [oamg/leapp-supplements](#oamgleapp-supplements)
      - [redhat-partner-tech/leapp-project](#redhat-partner-techleapp-project)
      - [swapdisk/snapshot](#swapdisksnapshot)
  - [ありがとうございました!](#ありがとうございました！)

## 目標

* このワークショップで学んだことを復習する
* さらなる探求のためのアイデアを検討する
* コードを確認し、アップストリームに参加する

## ガイド

おめでとうございます! RHEL インプレース アップグレード自動化ワークショップはこれで終了です。これで、組織が大規模な RHEL アップグレードを管理するのに役立つ自動化ソリューションの開発を開始するために必要な知識が身につきました。

学んだことを復習し、次に何をするかを考えてみましょう。

### Step 1 - 学習内容

このワークショップでは、RHEL インプレース アップグレードを自動化するための規範的なアプローチについて学びながら、実践的な経験を積むことができました。

- ワークショップの演習を進める中で、RHEL クラウド インスタンスを少数アップグレードしただけですが、AAP のエンタープライズ デプロイメントの力により、このアプローチを大規模な RHEL ホスト全体に展開できます。

- 自動化されたスナップショット/ロールバックが、RHEL インプレース アップグレード自動化を正常に提供するために必要な最も重要な機能の 1 つである理由を学びました。スナップショットは、RHEL アップグレードに直面するアプリ チームが経験するリスクと不安を排除するだけでなく、堅牢なアップグレード自動化プレイブックの開発を加速するのにも役立ちます。

- また、大規模なエンタープライズ環境の複雑な要件に対処するために開発する必要があるカスタム自動化についても学びました。特別なアップグレード前チェックを報告するための Leapp カスタム アクターの使用、一般的な修復とサードパーティのツールおよびエージェントを処理するための Ansible Playbook の実行など、この例をいくつか示しました。

- しかし、私たちが学んだ最も重要な教訓は、「これはできる！」ということです。

### Step 2 - 追加クレジットのアクティビティ

このワークショップで、何ができるかについて理解していただけたと思いますが、まだ表面をなぞっただけです。

- RHEL7 から RHEL9 にアップグレードすることは可能ですか? Leapp フレームワークは "ダブル アップグレード" を直接サポートしていませんが、RHEL7 から RHEL8 にアップグレードしたホストを、そこから RHEL9 にアップグレードすることは可能です。ワークショップ ラボのペットアプリインスタンスの 1 つでこれを試すことができます。

試してみる場合は、注意すべき点がいくつかあります。まず、"AUTO / 04 Commit" プレイブック ジョブ テンプレートを実行する必要があります。このジョブは、RHEL7 から RHEL8 へのアップグレード用に作成されたスナップショットを削除するので、これを行う前にすべてに問題がないことを確認してください。その後、RHEL7 にロールバックすることはできなくなりますが、RHEL9 にアップグレードした後、必要に応じて RHEL8 にロールバックできます。

RHEL7 から RHEL9 に移行する際のもう 1 つの考慮事項は、アプリケーションへの影響のリスクが増大することです。 RHEL システム ライブラリのバイナリ前方互換性は各 RHEL メジャー バージョン間で非常に堅固ですが、"N+2" 互換性は保証されていません。もちろん、確実に知る唯一の方法は試してみることです。

- オプションの演習のいずれかをスキップした場合、今から実施することも可能です。
- [演習 1.5 - カスタムのアップグレード前チェック](../1.5-custom-modules/README.ja.md)
- [演習 1.6 - ペットアプリのデプロイ](../1.6-my-pet-app/README.ja.md)
- [演習 2.4 - ペットアプリの状態は?](../2.4-check-pet-app/README.ja.md)
- [演習 3.1 - インスタンスを壊す](../3.1-rm-rf/README.ja.md)

- これで、ワークショップ ラボ環境を自由に操作できるようになりました。さらなる学習と実験のために、独自のアイデアを考え出してください。好きなだけアップグレードとロールバックができることを覚えておいてください。繰り返しましょう。

### Step 3 - コードの確認

このワークショップで使用されるすべての Ansible Role と Playbook は、GitHub にあるアップストリーム リポジトリで管理されています。時間をかけてコードを確認し、これらのリソースをサポートするコミュニティに参加してください。

#### [redhat-c​​op/infra.leapp](https://github.com/redhat-c​​op/infra.leapp)

- `infra.leapp` コレクションは、アップグレード前のレポートを生成する Ansible Role と、RHEL アップグレードを実行するために使用される別の Role を提供します。このコレクションは、RHEL7 以降からのアップグレードに Leapp フレームワークを使用しますが、古い Red Hat アップグレード ツールを使用して RHEL6 からのアップグレードもサポートします。このコレクションは、Ansible Galaxy [こちら](https://galaxy.ansible.com/infra/leapp) で公開されており、Ansible Automation Hub の検証済みコンテンツ [こちら](https://console.redhat.com/ansible/automation-hub/repo/validated/infra/leapp/) からも入手できます。組織で RHEL のインプレース アップグレードを計画している場合、これらのロールは概念実証の自動化を迅速に展開し、アップグレードを開始するのに役立ちます。

#### [oamg/leapp-supplements](https://github.com/oamg/leapp-supplements)

- Leapp Supplements は、Leapp カスタム アクターのサンプルのリポジトリです。オプションの [カスタム アップグレード前チェック](../1.5-custom-modules/README.ja.md) 演習で示された CheckRebootHygiene アクターは、ここで管理されています。また、Leapp カスタム アクターをインストールするためのパッケージをビルドするために使用できる Makefile と RPM 仕様ファイルもあります。

#### [redhat-partner-tech/leapp-project](https://github.com/redhat-partner-tech/leapp-project)

- ここには、ワークショップに含まれるすべての AAP ジョブ テンプレートと Ansible プレイブックがあります。また、ワークショップ ラボ環境のプロビジョニングに使用されるインフラストラクチャ アズ コード (IaC) マジックを調べることもできます。

#### [swapdisk/snapshot](https://github.com/swapdisk/snapshot)

- ここでは、LVM を使用してスナップショット セットを管理するための新しい Ansible ロールの作業が進行中です。 [スナップショットについてお話ししましょう](../2.2-snapshots/README.ja.md#lvm) 演習で説明されているように、LVM スナップショットの自動化に興味がある場合は、このプロジェクトの著者と連絡を取り、アクションに参加してください。

## ありがとうございました！

このワークショップをお楽しみいただけた場合は、5 つ星の評価を付けるか、レビューを書いてください。改善や新機能のアイデアがある場合は、[こちら](https://github.com/ansible/workshops/issues/new/choose) で @swapdisk と @heatmiser をタグ付けして、遠慮なく問題を提起してください。すべてのアイデアとフィードバックを歓迎します!

---

**ナビゲーション**

[前の演習](../3.3-check-undo/README.ja.md)

[ホーム](../README.ja.md)
